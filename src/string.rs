pub trait FromCP437 {
    fn from_cp437(bytes: Vec<u8>) -> Self;
}

impl FromCP437 for String {
    fn from_cp437(bytes: Vec<u8>) -> Self {
        let mut string = String::new();
        for byte in bytes {
            let c = match byte {
                1 => std::char::from_u32(0x263A),
                2 => std::char::from_u32(0x263B),
                3 => std::char::from_u32(0x2665),
                4 => std::char::from_u32(0x2666),
                5 => std::char::from_u32(0x2663),
                6 => std::char::from_u32(0x2660),
                7 => std::char::from_u32(0x2022),
                8 => std::char::from_u32(0x25D8),
                9 => std::char::from_u32(0x25CB),
                10 => std::char::from_u32(0x25D9),
                11 => std::char::from_u32(0x2642),
                12 => std::char::from_u32(0x2640),
                13 => std::char::from_u32(0x266A),
                14 => std::char::from_u32(0x266B),
                15 => std::char::from_u32(0x263C),
                16 => std::char::from_u32(0x25BA),
                17 => std::char::from_u32(0x25C4),
                18 => std::char::from_u32(0x2195),
                19 => std::char::from_u32(0x203C),
                20 => std::char::from_u32(0x00B6),
                21 => std::char::from_u32(0x00A7),
                22 => std::char::from_u32(0x25AC),
                23 => std::char::from_u32(0x21A8),
                24 => std::char::from_u32(0x2191),
                25 => std::char::from_u32(0x2193),
                26 => std::char::from_u32(0x2192),
                27 => std::char::from_u32(0x2190),
                28 => std::char::from_u32(0x221F),
                29 => std::char::from_u32(0x2194),
                30 => std::char::from_u32(0x25B2),
                31 => std::char::from_u32(0x25BC),
                127 => std::char::from_u32(0x2302),
                128 => std::char::from_u32(0x00C7),
                129 => std::char::from_u32(0x00FC),
                130 => std::char::from_u32(0x00E9),
                131 => std::char::from_u32(0x00E2),
                132 => std::char::from_u32(0x00E4),
                133 => std::char::from_u32(0x00E0),
                134 => std::char::from_u32(0x00E5),
                135 => std::char::from_u32(0x00E7),
                136 => std::char::from_u32(0x00EA),
                137 => std::char::from_u32(0x00EB),
                138 => std::char::from_u32(0x00E8),
                139 => std::char::from_u32(0x00EF),
                140 => std::char::from_u32(0x00EE),
                141 => std::char::from_u32(0x00EC),
                142 => std::char::from_u32(0x00C4),
                143 => std::char::from_u32(0x00C5),
                144 => std::char::from_u32(0x00C9),
                145 => std::char::from_u32(0x00E6),
                146 => std::char::from_u32(0x00C6),
                147 => std::char::from_u32(0x00F4),
                148 => std::char::from_u32(0x00F6),
                149 => std::char::from_u32(0x00F2),
                150 => std::char::from_u32(0x00FB),
                151 => std::char::from_u32(0x00F9),
                152 => std::char::from_u32(0x00FF),
                153 => std::char::from_u32(0x00D6),
                154 => std::char::from_u32(0x00DC),
                155 => std::char::from_u32(0x00A2),
                156 => std::char::from_u32(0x00A3),
                157 => std::char::from_u32(0x00A5),
                158 => std::char::from_u32(0x20A7),
                159 => std::char::from_u32(0x0192),
                160 => std::char::from_u32(0x00E1),
                161 => std::char::from_u32(0x00ED),
                162 => std::char::from_u32(0x00F3),
                163 => std::char::from_u32(0x00FA),
                164 => std::char::from_u32(0x00F1),
                165 => std::char::from_u32(0x00D1),
                166 => std::char::from_u32(0x00AA),
                167 => std::char::from_u32(0x00BA),
                168 => std::char::from_u32(0x00BF),
                169 => std::char::from_u32(0x2310),
                170 => std::char::from_u32(0x00AC),
                171 => std::char::from_u32(0x00BD),
                172 => std::char::from_u32(0x00BC),
                173 => std::char::from_u32(0x00A1),
                174 => std::char::from_u32(0x00AB),
                175 => std::char::from_u32(0x00BB),
                176 => std::char::from_u32(0x2591),
                177 => std::char::from_u32(0x2592),
                178 => std::char::from_u32(0x2593),
                179 => std::char::from_u32(0x2502),
                180 => std::char::from_u32(0x2524),
                181 => std::char::from_u32(0x2561),
                182 => std::char::from_u32(0x2562),
                183 => std::char::from_u32(0x2556),
                184 => std::char::from_u32(0x2555),
                185 => std::char::from_u32(0x2563),
                186 => std::char::from_u32(0x2551),
                187 => std::char::from_u32(0x2557),
                188 => std::char::from_u32(0x255D),
                189 => std::char::from_u32(0x255C),
                190 => std::char::from_u32(0x255B),
                191 => std::char::from_u32(0x2510),
                192 => std::char::from_u32(0x2514),
                193 => std::char::from_u32(0x2534),
                194 => std::char::from_u32(0x252C),
                195 => std::char::from_u32(0x251C),
                196 => std::char::from_u32(0x2500),
                197 => std::char::from_u32(0x253C),
                198 => std::char::from_u32(0x255E),
                199 => std::char::from_u32(0x255F),
                200 => std::char::from_u32(0x255A),
                201 => std::char::from_u32(0x2554),
                202 => std::char::from_u32(0x2569),
                203 => std::char::from_u32(0x2566),
                204 => std::char::from_u32(0x2560),
                205 => std::char::from_u32(0x2550),
                206 => std::char::from_u32(0x256C),
                207 => std::char::from_u32(0x2567),
                208 => std::char::from_u32(0x2568),
                209 => std::char::from_u32(0x2564),
                210 => std::char::from_u32(0x2565),
                211 => std::char::from_u32(0x2559),
                212 => std::char::from_u32(0x2558),
                213 => std::char::from_u32(0x2552),
                214 => std::char::from_u32(0x2553),
                215 => std::char::from_u32(0x256B),
                216 => std::char::from_u32(0x256A),
                217 => std::char::from_u32(0x2518),
                218 => std::char::from_u32(0x250C),
                219 => std::char::from_u32(0x2588),
                220 => std::char::from_u32(0x2584),
                221 => std::char::from_u32(0x258C),
                222 => std::char::from_u32(0x2590),
                223 => std::char::from_u32(0x2580),
                224 => std::char::from_u32(0x03B1),
                225 => std::char::from_u32(0x00DF),
                226 => std::char::from_u32(0x0393),
                227 => std::char::from_u32(0x03C0),
                228 => std::char::from_u32(0x03A3),
                229 => std::char::from_u32(0x03C3),
                230 => std::char::from_u32(0x00B5),
                231 => std::char::from_u32(0x03C4),
                232 => std::char::from_u32(0x03A6),
                233 => std::char::from_u32(0x0398),
                234 => std::char::from_u32(0x03A9),
                235 => std::char::from_u32(0x03B4),
                236 => std::char::from_u32(0x221E),
                237 => std::char::from_u32(0x03C6),
                238 => std::char::from_u32(0x03B5),
                239 => std::char::from_u32(0x2229),
                240 => std::char::from_u32(0x2261),
                241 => std::char::from_u32(0x00B1),
                242 => std::char::from_u32(0x2265),
                243 => std::char::from_u32(0x2264),
                244 => std::char::from_u32(0x2320),
                245 => std::char::from_u32(0x2321),
                246 => std::char::from_u32(0x00F7),
                247 => std::char::from_u32(0x2248),
                248 => std::char::from_u32(0x00B0),
                249 => std::char::from_u32(0x2219),
                250 => std::char::from_u32(0x00B7),
                251 => std::char::from_u32(0x221A),
                252 => std::char::from_u32(0x207F),
                253 => std::char::from_u32(0x00B2),
                254 => std::char::from_u32(0x25A0),
                0 | 255 => std::char::from_u32(0x0020),
                _ => std::char::from_u32(byte as u32),
            };
            string.push(c.expect("unreachable error converting cp437 to unicode"));
        }
        string
    }
}
